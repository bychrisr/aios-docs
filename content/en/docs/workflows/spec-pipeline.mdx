# Spec Pipeline

Transform informal requirements into executable specifications.

## Overview

The Spec Pipeline is a multi-phase workflow for complex features that need formal specification before implementation. It produces validated specs with implementation plans.

## Phases

| Phase | Agent | Output | Skip If |
|-------|-------|--------|---------|
| 1. Gather | @pm | `requirements.json` | Never |
| 2. Assess | @architect | `complexity.json` | source=simple |
| 3. Research | @analyst | `research.json` | SIMPLE class |
| 4. Write Spec | @pm | `spec.md` | Never |
| 5. Critique | @qa | `critique.json` | Never |
| 6. Plan | @architect | `implementation.yaml` | If APPROVED |

## Complexity Classes

| Score | Class | Phases Used |
|-------|-------|-------------|
| ≤ 8 | SIMPLE | gather → spec → critique (3) |
| 9-15 | STANDARD | All 6 phases |
| ≥ 16 | COMPLEX | 6 phases + revision cycle |

## Complexity Dimensions

Five dimensions scored 1-5:

1. **Scope** — Files affected
2. **Integration** — External APIs
3. **Infrastructure** — Changes needed
4. **Knowledge** — Team familiarity
5. **Risk** — Criticality level

## Critique Verdicts

| Verdict | Average Score | Next Step |
|---------|--------------|-----------|
| APPROVED | ≥ 4.0 | Plan (Phase 6) |
| NEEDS_REVISION | 3.0-3.9 | Revise (Phase 5b) |
| BLOCKED | {'<'} 3.0 | Escalate to @architect |

## Constitutional Gate

**Article IV — No Invention:** Every statement in `spec.md` MUST trace to FR-\*, NFR-\*, CON-\*, or a research finding. No invented features allowed.

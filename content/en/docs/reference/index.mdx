# Reference

Technical reference for Synkra AIOS configuration, agents, file structure, and status codes.

---

## Configuration Reference

AIOS uses a layered configuration system based on YAML files.

### Core Configuration (`core-config.yaml`)

The main configuration file at `.aios-core/core-config.yaml` defines project-wide settings:

| Section | Key | Description |
|---------|-----|-------------|
| `project` | `type` | Project type: `NEW_PROJECT`, `EXISTING_AIOS` |
| `project` | `version` | AIOS version installed |
| `project` | `installedAt` | Installation timestamp |
| `user_profile` | — | User level: `beginner`, `intermediate`, `advanced` |
| `qa` | `qaLocation` | QA artifacts directory |
| `prd` | `prdFile` | Path to PRD file |
| `prd` | `prdSharded` | Whether PRD is sharded into smaller files |
| `prd` | `prdShardedLocation` | Directory for sharded PRD files |
| `architecture` | `architectureFile` | Path to architecture document |
| `architecture` | `architectureSharded` | Whether architecture is sharded |
| `devLoadAlwaysFiles` | — | Files loaded automatically for @dev agent |
| `devStoryLocation` | — | Directory for story files |
| `slashPrefix` | — | Command prefix identifier |
| `toolsLocation` | — | Path to AIOS tools |
| `scriptsLocation` | `core` | Core scripts path |
| `scriptsLocation` | `development` | Development scripts path |
| `scriptsLocation` | `infrastructure` | Infrastructure scripts path |
| `dataLocation` | — | Data storage path |
| `ide` | `selected` | Enabled IDE integrations |
| `mcp` | `enabled` | MCP integration enabled |
| `mcp` | `configLocation` | MCP config file path |

### Project Configuration (`.aios/config.yaml`)

Project-specific overrides that live in the project directory. This file is created during AIOS initialization and contains local settings.

### Agent Definitions (`.aios-core/agents/`)

Each agent is defined by a YAML file containing:
- Persona name and archetype
- Role description and responsibilities
- Capabilities and restrictions
- Tool access permissions
- Constitutional rules

### Task Definitions (`.aios-core/development/tasks/`)

Tasks are defined as Markdown files specifying:
- Input requirements and parameters
- Pre-conditions and post-conditions
- Execution steps
- Output format and validation
- Agent assignment

---

## Agent Reference

AIOS includes 12 specialized agents, each with a unique persona and defined responsibilities.

| Agent ID | Persona | Archetype | Primary Role |
|----------|---------|-----------|-------------|
| `@aios-master` | Orion | Orchestrator | Framework governance, agent coordination, constitutional enforcement |
| `@analyst` | Atlas | Researcher | Deep research, data analysis, competitive analysis |
| `@architect` | Aria | Visionary | System architecture, technology selection, design decisions |
| `@data-engineer` | Dara | Data Sage | Schema design, query optimization, RLS policies, migrations |
| `@dev` | Dex | Builder | Code implementation, git operations (local), story development |
| `@devops` | Gage | Guardian | Git push, PR management, CI/CD, MCP management, deployment |
| `@pm` | Morgan | Strategist | Epic creation/execution, requirements gathering, spec writing |
| `@po` | Pax | Validator | Story validation (10-point checklist), backlog prioritization |
| `@qa` | Quinn | Guardian | Quality gates, code review, QA loops, test verification |
| `@sm` | River | Facilitator | Story creation, template selection, sprint facilitation |
| `@squad-creator` | Nova | Creator | Squad creation, team composition, capability mapping |
| `@ux-design-expert` | Uma | Designer | UX research, frontend specs, design system, accessibility |

### Agent Relationships

The agents collaborate in a defined hierarchy:

```
@aios-master (orchestration)
  ├── @analyst (research) → @pm (planning)
  ├── @pm → @architect (design) → @data-engineer (database)
  ├── @architect → @ux-design-expert (UX)
  ├── @po (validation) → @sm (story creation)
  └── @dev (implementation) → @qa (quality) → @devops (deployment)
```

### Authority Matrix

| Operation | Exclusive Agent | Others |
|-----------|----------------|--------|
| `git push` / `git push --force` | @devops | Blocked |
| `gh pr create` / `gh pr merge` | @devops | Blocked |
| MCP add/remove/configure | @devops | Blocked |
| Story validation (GO/NO-GO) | @po | Blocked |
| Story creation from epic | @sm | Blocked |
| Epic orchestration | @pm | Blocked |
| Framework governance | @aios-master | Blocked |

---

## File Structure Reference

The `.aios-core/` directory contains all framework files:

```
.aios-core/
├── agents/                     # Agent persona definitions (YAML)
│   ├── aios-master.yaml
│   ├── analyst.yaml
│   ├── architect.yaml
│   ├── data-engineer.yaml
│   ├── dev.yaml
│   ├── devops.yaml
│   ├── pm.yaml
│   ├── po.yaml
│   ├── qa.yaml
│   ├── sm.yaml
│   ├── squad-creator.yaml
│   └── ux-design-expert.yaml
├── cli/                        # CLI entry point and commands
│   └── index.js
├── core/                       # Core framework logic
├── core-config.yaml            # Main configuration file
├── data/                       # Runtime data storage
├── development/
│   ├── scripts/                # Development automation scripts
│   ├── tasks/                  # Task definitions (Markdown)
│   └── templates/              # Story, epic, and document templates
├── docs/                       # Framework documentation
├── elicitation/                # Elicitation engine data
├── infrastructure/
│   └── scripts/                # Infrastructure automation
├── scripts/                    # Legacy scripts
└── tools/                      # AIOS tool definitions
```

### Project Directory (`.aios/`)

The `.aios/` directory stores project-specific data:

```
.aios/
├── config.yaml                 # Project-specific configuration
├── data/                       # Project runtime data
│   ├── usage-stats.json        # Usage statistics
│   └── telemetry/              # Telemetry data
└── backups/                    # Project backups
```

---

## Status Codes and Verdicts

### Story Status

| Status | Description | Triggered By |
|--------|-------------|-------------|
| `Draft` | Story created, not yet validated | @sm creates story |
| `Ready` | Story validated, ready for implementation | @po validates (GO verdict) |
| `InProgress` | Implementation started | @dev begins work |
| `InReview` | Implementation complete, under QA review | @qa begins review |
| `Done` | QA passed, changes pushed | @devops pushes changes |

### Validation Verdicts (Story Validation)

| Verdict | Score | Action |
|---------|-------|--------|
| `GO` | ≥ 7/10 on checklist | Story marked Ready, proceed to implementation |
| `NO-GO` | {'<'} 7/10 on checklist | Story returned with required fixes |

### QA Gate Verdicts

| Verdict | Condition | Action |
|---------|-----------|--------|
| `PASS` | All 7 checks OK | Approve, proceed to deployment |
| `CONCERNS` | Minor issues found | Approve with documented observations |
| `FAIL` | HIGH/CRITICAL issues found | Return to @dev with specific feedback |
| `WAIVED` | Issues accepted (rare) | Approve with documented waiver |

### QA Loop Verdicts

| Verdict | Action |
|---------|--------|
| `APPROVE` | Loop complete, mark story Done |
| `REJECT` | @dev applies fixes, re-review |
| `BLOCKED` | Escalate immediately |

### QA Loop Escalation Triggers

| Trigger | Description |
|---------|-------------|
| `max_iterations_reached` | 5 iterations without resolution |
| `verdict_blocked` | QA returned BLOCKED verdict |
| `fix_failure` | Fix attempts failed after retries |
| `manual_escalate` | User triggered `*escalate-qa-loop` |

### Spec Pipeline Verdicts (Critique Phase)

| Verdict | Average Score | Action |
|---------|---------------|--------|
| `APPROVED` | ≥ 4.0 | Proceed to implementation planning |
| `NEEDS_REVISION` | 3.0 - 3.9 | Revise spec and re-critique |
| `BLOCKED` | {'<'} 3.0 | Escalate to @architect |

### Complexity Classes (Spec Pipeline)

| Score | Class | Phases Executed |
|-------|-------|----------------|
| ≤ 8 | `SIMPLE` | gather, spec, critique (3 phases) |
| 9 - 15 | `STANDARD` | All 6 phases |
| ≥ 16 | `COMPLEX` | 6 phases + revision cycle |

### CodeRabbit Severity Levels

| Severity | Dev Phase | QA Phase |
|----------|-----------|----------|
| `CRITICAL` | Auto-fix, block if persists | Auto-fix, block if persists |
| `HIGH` | Auto-fix, document if fails | Auto-fix, document if fails |
| `MEDIUM` | Document as tech debt | Document as tech debt |
| `LOW` | Ignore | Ignore |

---

## YAML Schema Reference

### Story File Schema

```yaml
storyId: "STORY-{number}"
title: "Story title"
status: Draft | Ready | InProgress | InReview | Done
epic: "EPIC-{number}"
description: "Problem/need description"
acceptanceCriteria:
  - "Given... When... Then..."
scope:
  in:
    - "What is included"
  out:
    - "What is excluded"
dependencies: []
complexity: "S | M | L | XL"
risks: []
```

### QA Gate File Schema

```yaml
storyId: "STORY-{number}"
verdict: PASS | CONCERNS | FAIL | WAIVED
issues:
  - severity: low | medium | high
    category: code | tests | requirements | performance | security | docs
    description: "Issue description"
    recommendation: "Suggested fix"
```

### Epic Execution Schema

```yaml
epicId: "EPIC-{number}"
status: Planning | InProgress | Complete
stories:
  - storyId: "STORY-{number}"
    status: Draft | Ready | InProgress | InReview | Done
    assignedAgent: "@dev"
```

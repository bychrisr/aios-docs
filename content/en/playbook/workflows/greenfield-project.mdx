# Greenfield Project

Starting a new project from scratch with AIOS. This guide covers the three greenfield workflow variants and walks you through the full lifecycle from concept to production.

## When to Use a Greenfield Workflow

Use a greenfield workflow when you are building a brand-new application with no existing codebase. Typical scenarios include:

- New web applications, SaaS platforms, or enterprise apps
- Minimum Viable Products (MVPs) and prototypes
- Projects requiring comprehensive documentation from day one
- Long-term products with multiple team members

## Choosing the Right Variant

AIOS provides three greenfield workflow variants. Choose based on what you are building:

| Variant | Command | Best For |
|---------|---------|----------|
| **Full-Stack** | `*workflow greenfield-fullstack` | Web apps, SaaS, enterprise apps with both frontend and backend |
| **Service/API** | `*workflow greenfield-service` | REST APIs, GraphQL APIs, microservices, backend services |
| **UI Only** | `*workflow greenfield-ui` | SPAs, mobile apps, micro-frontends, static sites |

All three variants share the same overall structure but differ in which agents participate and which artifacts are produced during the planning phase.

## Workflow Phases

Every greenfield workflow follows four major phases:

### Phase 0: Environment Bootstrap

Before anything else, @devops (Gage) sets up the development environment.

```
@devops *environment-bootstrap
```

This step verifies and installs required CLIs (git, gh, node, npm), authenticates services (GitHub, Supabase, Railway), initializes the Git repository, and generates a project scaffold. It is skipped automatically if `.aios/environment-report.json` already exists.

### Phase 1: Discovery and Planning

This is the core planning phase where agents collaborate to produce all project documentation.

| Step | Agent | Produces | Required |
|------|-------|----------|----------|
| 1. Project Brief | @analyst (Atlas) | `docs/project-brief.md` | Yes |
| 2. PRD | @pm (Morgan) | `docs/prd.md` | Yes |
| 3. Frontend Spec | @ux-expert (Uma) | `docs/front-end-spec.md` | Full-Stack and UI only |
| 4. AI UI Prompt | @ux-expert (Uma) | Prompt for v0/Lovable | Optional |
| 5. Architecture | @architect (Aria) | `docs/fullstack-architecture.md` | Yes |
| 6. PRD Update | @pm (Morgan) | Updated `docs/prd.md` | If architect suggests changes |
| 7. Validation | @po (Pax) | Validation report | Yes |

**Key decision points:**
- If the architect suggests PRD changes, @pm updates the PRD before validation.
- If @po finds issues during validation, the relevant agent fixes them before proceeding.

**Optional steps** available in this phase: brainstorming sessions, market research, user research, and technical research.

### Phase 2: Document Sharding

Once all artifacts are validated, @po fragments the PRD and architecture into smaller files ready for IDE-based development.

```
@po *shard-doc docs/prd.md
```

This produces:
- `docs/prd/` -- Individual PRD sections
- `docs/architecture/source-tree.md` -- Project directory structure
- `docs/architecture/tech-stack.md` -- Technology stack
- `docs/architecture/coding-standards.md` -- Coding standards

### Phase 3: Development Cycle

The iterative build phase where stories are created, implemented, and reviewed.

```
@sm *draft                     # Create next story
@dev *develop {story-id}       # Implement the story
@qa *review {story-id}         # QA review (optional)
@devops *push                  # Ship when approved
```

Each story follows the lifecycle: **Draft** {">"} **Ready** {">"} **InProgress** {">"} **InReview** {">"} **Done**

The cycle repeats for every story in the epic. After all stories are complete, @po can run an optional epic retrospective.

## Full-Stack Variant Walkthrough

The full-stack variant is the most common. Here is the step-by-step flow:

1. **Bootstrap**: `@devops *environment-bootstrap` -- Set up repo, CLIs, project scaffold
2. **Brief**: `@analyst` creates the project brief with optional brainstorming
3. **PRD**: `@pm` transforms the brief into a detailed Product Requirements Document
4. **Frontend Spec**: `@ux-expert` creates UI/UX specifications from the PRD
5. **Architecture**: `@architect` designs the full-stack architecture (may suggest PRD changes)
6. **Validation**: `@po` runs the master checklist on all artifacts
7. **Sharding**: `@po` fragments documents for development
8. **Story Loop**: `@sm` creates stories, `@dev` implements, `@qa` reviews, repeat
9. **Retrospective**: `@po` documents learnings after epic completion

## Prerequisites

| Requirement | Minimum | Recommended |
|-------------|---------|-------------|
| Node.js | 18.x | 20.x |
| Git | 2.x | 2.43+ |
| GitHub CLI | Latest | Latest |

Required authentications: GitHub (`gh auth login`), and optionally Supabase and Railway.

## Differences Between Variants

| Aspect | Full-Stack | Service/API | UI Only |
|--------|-----------|-------------|---------|
| Frontend spec | Yes | No | Yes |
| Architecture template | `fullstack-architecture-tmpl` | `architecture-tmpl` | `front-end-architecture-tmpl` |
| AI UI prompt step | Optional | No | Optional |
| @ux-expert involvement | Yes | No | Yes |
| Database planning | Yes | Yes | No |
| Typical agents | 9 agents | 7 agents | 8 agents |

## Quick Start Commands

```
# Full-stack project
*workflow greenfield-fullstack

# Backend service or API
*workflow greenfield-service

# Frontend/UI application
*workflow greenfield-ui
```

## Troubleshooting

| Problem | Solution |
|---------|----------|
| Template not found | Verify templates exist in `.aios-core/development/templates/` |
| Bootstrap fails on auth | Re-authenticate with `gh auth login --scopes repo,workflow` |
| PO validation keeps failing | Review the po-master-checklist criteria; ensure artifacts are consistent |
| Document sharding fails | Check that markdown uses `##` headings for section detection |
| Story incomplete | Run `*story-checklist` to identify missing fields |

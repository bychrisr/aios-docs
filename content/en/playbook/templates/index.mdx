# Template Reference

AIOS uses a template system to ensure consistency across all project artifacts. Templates provide standardized structures for stories, epics, architecture documents, agent definitions, and more.

Templates are loaded automatically by agent commands — you do not need to reference them manually in most cases.

---

## Template Location

All templates live in your project at:

```
.aios-core/development/templates/
```

---

## Available Templates

### Project Document Templates

| Template | File | Used By |
|----------|------|---------|
| **AIOS Doc** | `aios-doc-template.md` | General-purpose documentation for any artifact |
| **Research Prompt** | `research-prompt-tmpl.md` | Structured prompts for Spec Pipeline research tasks (@analyst) |
| **Subagent Step Prompt** | `subagent-step-prompt.md` | Prompt template for multi-step subagent execution |

### Squad Templates

Squad templates scaffold new squads (teams of specialized agents):

| Template | File | Description |
|----------|------|-------------|
| **Agent Definition** | `squad/agent-template.md` | Define a new agent: role, capabilities, authority boundaries |
| **Task Definition** | `squad/task-template.md` | Create a reusable task with inputs, outputs, pre/post-conditions |
| **Workflow Definition** | `squad/workflow-template.yaml` | Multi-step automated workflow in YAML |
| **Checklist** | `squad/checklist-template.md` | Quality checklist with scoring criteria |
| **Data Config** | `squad/data-template.yaml` | Agent data and configuration files |
| **Script** | `squad/script-template.js` | JavaScript automation scripts |
| **Tool** | `squad/tool-template.js` | Agent tools and utilities |
| **Template** | `squad/template-template.md` | Meta-template for creating new templates |

### Squad Starter Kit

The `squad-template/` directory provides a complete starter kit for a new squad:

```
squad-template/
  agents/        # Agent definition files
  tasks/         # Task definition files
  templates/     # Squad-specific templates
  workflows/     # Workflow configurations
  tests/         # Test files
  squad.yaml     # Squad configuration
  package.json   # Dependencies
  README.md      # Documentation
```

### Service Templates

The `service-template/` directory contains Handlebars (`.hbs`) templates for generating TypeScript service packages:

| Template | Description |
|----------|-------------|
| `client.ts.hbs` | HTTP client with error handling and retry logic |
| `errors.ts.hbs` | Custom error classes for the service |
| `index.ts.hbs` | Package entry point and exports |
| `types.ts.hbs` | TypeScript type definitions |
| `package.json.hbs` | Package configuration |
| `README.md.hbs` | Auto-generated documentation |

---

## How Templates Work

AIOS uses the Template Engine V2, which processes templates through five steps:

1. **Selection** — The agent command picks the appropriate template based on artifact type
2. **Variable Resolution** — Template variables (project name, date, agent context) are resolved
3. **Rendering** — The template is rendered with the resolved variables
4. **Validation** — Output is validated against the template schema
5. **Output** — The final artifact is written to the correct location

### Template Variables

| Variable | Value |
|----------|-------|
| `projectName` | Current project name from configuration |
| `date` | Current date |
| `agent` | Name of the executing agent |
| `storyId` | Current story identifier (when applicable) |
| `epicId` | Current epic identifier (when applicable) |

---

## Using Templates

### Creating Documents

Use `*create-doc` with the relevant agent:

```bash
# Morgan creates a PRD
@pm *create-doc prd

# Ajax creates documentation
@docs *create-doc

# River creates a story from template
@sm *draft
```

### Creating a New Squad

To scaffold a complete new squad:

```bash
@aios-master *create-squad my-squad
```

This copies the `squad-template/` structure and customizes it for your squad.

### Creating Custom Templates

1. Copy an existing template from `.aios-core/development/templates/squad/`
2. Modify the structure, sections, and placeholder variables
3. Place it in the `squad/` directory or your squad's `templates/` folder
4. Reference it in the appropriate agent command or task definition

Use `squad/template-template.md` as a starting point — it is a meta-template designed for creating new templates.

---

## Template Categories Summary

| Category | Templates | Used By |
|----------|-----------|---------|
| **Documents** | aios-doc, research-prompt, subagent-step-prompt | @pm (Morgan), @analyst (Atlas), all agents |
| **Squad Artifacts** | agent, task, workflow, checklist, data, script, tool | @aios-master (Orion), squad creators |
| **Service Generation** | client, errors, index, types, package.json, README | @architect (Aria), @dev (Dex) |
| **Starter Kit** | Complete squad-template directory | @aios-master (Orion) |

For the full agent list with commands, see [Agents at a Glance](/playbook/agents).
